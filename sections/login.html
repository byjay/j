<div id="login-screen"
    class="fixed inset-0 z-50 flex flex-col items-center justify-center p-4 transition-opacity duration-300"
    style="background-image: url('images/BACK.png'); background-size: contain; background-repeat: no-repeat; background-position: center; background-color: #000;">

    <div class="bg-white/80 backdrop-blur-sm p-6 rounded-3xl shadow-2xl w-full max-w-md border border-white/50">
        <!-- 로고 영역: 세로 중앙 정렬 -->
        <div class="text-center mb-6">
            <img src="images/app_icon.png" alt="JAP-BONG" class="w-16 h-16 mx-auto rounded-2xl shadow-lg mb-3">
            <h1 class="text-2xl font-black text-red-600 tracking-tight">JAP-BONG</h1>
            <p class="text-sm text-gray-500 mt-1">아빠가 만든 가족 일본어 앱 🍌</p>
        </div>

        <div class="grid grid-cols-2 gap-4">
            <div class="user-card group bg-white p-3 rounded-2xl shadow-md hover:shadow-xl border-2 border-transparent hover:border-red-400 flex flex-col items-center cursor-pointer transition-all duration-200 transform hover:-translate-y-1"
                onclick="showPasswordPrompt()">
                <div
                    class="w-16 h-16 mb-2 rounded-full overflow-hidden border-4 border-gray-100 group-hover:border-red-100 transition-colors">
                    <img src="images/dad.png" alt="아빠" class="w-full h-full object-cover">
                </div>
                <h3 class="text-lg font-bold text-gray-800 group-hover:text-red-600">아빠</h3>
            </div>
            <div class="user-card group bg-white p-3 rounded-2xl shadow-md hover:shadow-xl border-2 border-transparent hover:border-pink-400 flex flex-col items-center cursor-pointer transition-all duration-200 transform hover:-translate-y-1"
                onclick="showMomPasswordPrompt()">
                <div
                    class="w-16 h-16 mb-2 rounded-full overflow-hidden border-4 border-gray-100 group-hover:border-pink-100 transition-colors">
                    <img src="images/mom_orig.png" alt="엄마" class="w-full h-full object-cover">
                </div>
                <h3 class="text-lg font-bold text-gray-800 group-hover:text-pink-600">엄마</h3>
            </div>
            <div class="user-card group bg-white p-3 rounded-2xl shadow-md hover:shadow-xl border-2 border-transparent hover:border-purple-400 flex flex-col items-center cursor-pointer transition-all duration-200 transform hover:-translate-y-1"
                onclick="showSieunPasswordPrompt()">
                <div
                    class="w-16 h-16 mb-2 rounded-full overflow-hidden border-4 border-gray-100 group-hover:border-purple-100 transition-colors">
                    <img src="images/sieun.png" alt="시으니" class="w-full h-full object-cover">
                </div>
                <h3 class="text-lg font-bold text-gray-800 group-hover:text-purple-600">시으니</h3>
            </div>
            <div class="user-card group bg-white p-3 rounded-2xl shadow-md hover:shadow-xl border-2 border-transparent hover:border-blue-400 flex flex-col items-center cursor-pointer transition-all duration-200 transform hover:-translate-y-1"
                onclick="showHarongPasswordPrompt()">
                <div
                    class="w-16 h-16 mb-2 rounded-full overflow-hidden border-4 border-gray-100 group-hover:border-blue-100 transition-colors">
                    <img src="images/harong.png" alt="하롱이" class="w-full h-full object-cover">
                </div>
                <h3 class="text-lg font-bold text-gray-800 group-hover:text-blue-600">하롱이</h3>
            </div>
        </div>

        <!-- 손님 체험하기 버튼 -->
        <div class="mt-4">
            <button onclick="showGuestLoginModal()"
                class="w-full bg-gradient-to-r from-amber-400 to-orange-500 text-white p-3 rounded-2xl shadow-md hover:shadow-lg transition-all duration-200 flex items-center justify-center gap-3 group">
                <span class="text-2xl">🐿️</span>
                <div class="text-left">
                    <span class="font-bold text-base">손님 체험하기</span>
                    <p class="text-xs text-amber-100">이름과 캐릭터를 선택하세요</p>
                </div>
            </button>
        </div>
    </div>
</div>

<!-- ★★★ 손님 로그인 모달 (아바타 선택) ★★★ -->
<!-- 손님 로그인 모달 (Step-by-Step) -->
<div id="guest-login-modal"
    class="fixed inset-0 z-[100] hidden items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-fade-in">
    <div class="bg-white w-full max-w-md rounded-3xl shadow-2xl overflow-hidden flex flex-col animate-scale-up">
        <!-- Header -->
        <div class="bg-amber-500 p-6 text-white text-center relative">
            <h3 class="text-2xl font-black italic tracking-tight">GUEST LOGIN</h3>
            <p class="text-xs text-amber-100 font-bold mt-1 opacity-90">아바타를 먼저 골라주세요!</p>
            <button onclick="closeGuestLoginModal()"
                class="absolute top-4 right-4 text-white/50 hover:text-white transition">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="p-6">
            <!-- [STEP 1] 아바타 선택 -->
            <div id="guest-step-1" class="space-y-4">
                <div class="flex items-center gap-2 mb-2">
                    <span
                        class="w-6 h-6 rounded-full bg-amber-100 text-amber-600 flex items-center justify-center font-bold text-xs ring-4 ring-amber-50">1</span>
                    <h4 class="font-bold text-gray-800">나만의 캐릭터를 선택하세요</h4>
                </div>
                <div id="guest-avatar-grid" class="grid grid-cols-3 gap-3">
                    <!-- JS renders premium avatars here -->
                </div>
            </div>

            <!-- [STEP 2] 이름 입력 (Hidden by default) -->
            <div id="guest-step-2" class="hidden space-y-6 animate-fade-in">
                <div class="flex items-center gap-2">
                    <span
                        class="w-6 h-6 rounded-full bg-amber-100 text-amber-600 flex items-center justify-center font-bold text-xs ring-4 ring-amber-50">2</span>
                    <h4 class="font-bold text-gray-800">사용할 이름을 입력해주세요</h4>
                </div>

                <div class="flex flex-col items-center gap-4">
                    <div class="relative group">
                        <div
                            class="w-24 h-24 rounded-3xl overflow-hidden border-4 border-amber-500 shadow-xl ring-8 ring-amber-50">
                            <img id="selected-avatar-preview" src="" class="w-full h-full object-cover">
                        </div>
                        <button onclick="guestBackToAvatars()"
                            class="absolute -bottom-2 -right-2 w-8 h-8 bg-gray-800 text-white rounded-full flex items-center justify-center hover:bg-gray-700 shadow-lg">
                            <i class="fas fa-redo-alt text-xs"></i>
                        </button>
                    </div>

                    <div class="w-full relative">
                        <input type="text" id="guest-name-input" maxlength="10" placeholder="닉네임을 입력하세요"
                            class="w-full px-5 py-4 bg-gray-50 border-2 border-gray-100 rounded-2xl text-center font-black text-xl text-gray-800 focus:border-amber-500 focus:bg-white focus:outline-none transition-all shadow-inner">
                    </div>
                </div>

                <div class="flex gap-2 pt-2">
                    <button onclick="guestBackToAvatars()"
                        class="flex-1 py-4 bg-gray-100 text-gray-500 font-bold rounded-2xl hover:bg-gray-200 transition active:scale-95">이전</button>
                    <button onclick="completeGuestLogin()"
                        class="flex-[2] py-4 bg-gradient-to-r from-amber-500 to-orange-600 text-white font-black rounded-2xl shadow-xl hover:shadow-2xl transition active:scale-95 flex items-center justify-center gap-2">
                        <span>여행 시작!</span>
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>